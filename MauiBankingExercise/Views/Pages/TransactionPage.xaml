<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:MauiBankingExercise.Views.Controls"
             x:Class="MauiBankingExercise.Views.Pages.TransactionPage"
             Title="Make Transaction"
             BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#1E1E1E}">

    <ScrollView Padding="20">
        <StackLayout Spacing="20">
            <!-- Account Info -->
            <controls:BalanceCard Title="{Binding Account.AccountTypeName}"
                                 Balance="{Binding Account.AccountBalance}"
                                 Subtitle="{Binding Account.AccountNumber}" />

            <!-- Transaction Form -->
            <Border BackgroundColor="{AppThemeBinding Light=White, Dark=#2D2D30}"
                    Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                    StrokeThickness="1"
                    Padding="20">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12" />
                </Border.StrokeShape>

                <StackLayout Spacing="16">
                    <!-- Transaction Type -->
                    <StackLayout>
                        <Label Text="Transaction Type" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                        <Picker ItemsSource="{Binding TransactionTypes}"
                               SelectedItem="{Binding SelectedTransactionType}"
                               ItemDisplayBinding="{Binding Name}"
                               BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#404040}"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    </StackLayout>

                    <!-- Amount -->
                    <StackLayout>
                        <Label Text="Amount" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                        <Entry Text="{Binding Amount}" 
                               Keyboard="Numeric"
                               Placeholder="0.00"
                               BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#404040}"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                        <Label Text="{Binding AmountError}" 
                               IsVisible="{Binding HasAmountError}"
                               TextColor="{AppThemeBinding Light=#D32F2F, Dark=#F44336}"
                               FontSize="14" />
                    </StackLayout>

                    <!-- Description -->
                    <StackLayout>
                        <Label Text="Description (Optional)" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                        <Entry Text="{Binding Description}" 
                               Placeholder="Enter transaction description"
                               BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#404040}"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    </StackLayout>
                </StackLayout>
            </Border>

            <!-- Action Buttons -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="16">
                <Button Text="Submit Transaction" 
                       Command="{Binding SubmitTransactionCommand}"
                       BackgroundColor="{AppThemeBinding Light=#1976D2, Dark=#1565C0}"
                       TextColor="White"
                       CornerRadius="20"
                       Padding="32,16" />
                <Button Text="Cancel" 
                       Command="{Binding CancelCommand}"
                       BackgroundColor="{AppThemeBinding Light=#757575, Dark=#616161}"
                       TextColor="White"
                       CornerRadius="20"
                       Padding="32,16" />
            </StackLayout>

            <!-- Loading Indicator -->
            <ActivityIndicator IsVisible="{Binding IsBusy}" 
                              IsRunning="{Binding IsBusy}"
                              Color="{AppThemeBinding Light=#1976D2, Dark=#64B5F6}" />

            <!-- Error Message -->
            <Label Text="{Binding Error}" 
                   IsVisible="{Binding HasError}"
                   BackgroundColor="{AppThemeBinding Light=#FFEBEE, Dark=#B71C1C}"
                   TextColor="{AppThemeBinding Light=#C62828, Dark=White}"
                   Padding="16,12" />
        </StackLayout>
    </ScrollView>
</ContentPage>